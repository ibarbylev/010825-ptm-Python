## Конструкция `match-case`

`match-case`** в Python — это новый способ организации условной логики, появившийся в Python 3.10.  
Он похож на `switch-case` из других языков, но гораздо более мощный и интеллектуальный.  
Поддерживает **паттерн-матчинг**, включая структуры данных и проверки значений.

---

### 1. Синтаксис

```python
match <выражение>:
    case <паттерн_1>:
        # код, если совпал паттерн_1
    case <паттерн_2>:
        # код, если совпал паттерн_2
    case _:
        # "default", если ничего не совпало
```

* `match <выражение>:` — выражение, которое проверяется.
* `case  <паттерн_1>:` — паттерн, с которым сравнивается выражение.
* `_` — универсальный паттерн, аналог `else`.


---

### 2. Простейший пример (замена `if-elif-else`)

```python
x = 2

match x:
    case 1:
        print("Один")
    case 2:
        print("Два")  # сработает
    case 3:
        print("Три")
    case _:
        print("Другое число")
```

---

### 3. Несколько значений в одном `case`

```python
x = 5

match x:
    case 1 | 2 | 3:
        print("Малое число")
    case 4 | 5 | 6:
        print("Среднее число")  # сработает
    case _:
        print("Другое число")
```

`|` означает "или" — если выражение совпадает с любым значением, паттерн срабатывает.

---

### 4. Сопоставление с типами (type pattern)

```python
value = [1, 2, 3]

match value:
    case int():
        print("Целое число")
    case str():
        print("Строка")
    case list():
        print("Список")  # сработает
    case _:
        print("Другое")
```

Можно использовать для проверки типа объекта.

---

### 5. Паттерн-матчинг структур данных (списки, кортежи)

```python
point = (0, 0)

match point:
    case (0, 0):
        print("Начало координат")  # сработает
    case (x, 0):
        print(f"На оси X в точке {x}")
    case (0, y):
        print(f"На оси Y в точке {y}")
    case (x, y):
        print(f"Точка {x}, {y}")
```

Здесь переменные `x` и `y` **автоматически создаются** и получают значения из тюпла (кортежа).

---

### 6. Точное совпадение строк

```python
command = "start"

match command:
    case "start":
        print("Запуск программы")  # сработает
    case "stop":
        print("Остановка программы")
    case "pause":
        print("Пауза")
    case _:
        print("Неизвестная команда")
```

---

### 7. Несколько вариантов через `|`

```python
command = "restart"

match command:
    case "start" | "resume":
        print("Запуск или возобновление")
    case "stop" | "pause":
        print("Остановка или пауза")
    case _:
        print("Неизвестная команда")  # сработает
```

---

### 8. Использование переменной для захвата строки

```python
command = "update"

match command:
    case cmd if cmd.startswith("up"):
        print(f"Команда обновления: {cmd}")  # сработает
    case cmd if cmd.startswith("down"):
        print(f"Команда скачивания: {cmd}")
    case _:
        print("Другая команда")
```


### 9. Использование `if guard` (когда паттерн становится условием)

```python
number = 7
match number:
    case 1 | 2 | 3:
        print("Это один, два или три")
    case n if n > 5:
        print("Число больше 5")
    case _:
        print("Число меньше или равно 5")
```

Здесь при `case n if n > 5:` мы ставим условие для `number > 5`   
(что явно запрещено условиями, так как паттерн должен быть значением, 
так как `case number > 5:` даст ошибку).

Поэтому идём на хитрость - сохраняем значение `number`во временную переменную `n`.  
И далее сравниваем уже её.  

Возможен и другой вариант:
```python
number = 7
match number:
    case 1 | 2 | 3:
        print("Это один, два или три")
    case _ if number > 5:
        print("Число больше 5")
    case _:
        print("Число меньше или равно 5")
```

Однако, первый вариант (`case n if n > 5:` вместо `case _ if number > 5:`)  
считается более надёжным и корректным.


В заключении, 

# Итоговая таблица шаблонов `match-case` 

| Тип шаблона         | Описание                                             | Пример `case`         | Результат                                          |
|---------------------|------------------------------------------------------|-----------------------|----------------------------------------------------|
| Литеральный шаблон  | Сравнивает с конкретным значением (число, строка).   | `case 42:`            | x = 42 → "Answer" x = 100 → "Other"                |
| Шаблон захвата      | Сохраняет значение в переменную.                     | `case "Alice": `      | name = "Alice" → "Hi" name = "Bob" → "Hey, Bob!"   |
| Список/Кортеж       | Проверяет структуру списка или кортежа.              | `case []:`            | lst = [] → "Empty" lst = \[1, 2\] → "Two: 1, 2"    |
| Словарь             | Проверяет ключи и значения в словаре.                | `case {"name": n}:`   | d = {"name": "Alice"} → "Alice" d = {} → "No name" |
| Класс               | Проверяет объект класса и его атрибуты.              | `case Point(0):`      | p = Point(0) → "Zero" p = Point(5) → "At 5"        |
| Условие (Guard)     | Добавляет проверку условия к шаблону.                | `case _ if n > 0:`    | num = 5 → "Positive" num = -1 → "Not positive"     |
| OR (`\|`)            | Сравнивает с несколькими значениями.                | `case 1 \| 2:`        | x = 1 → True x = 3 → "Other"                  |
| Wildcard (`_`)      | Ловит любое значение (аналог `else`).                | `case _:`             | возвращает всё, что не совпало ни с одним case     |



